"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4417],{4417:($,f,l)=>{l.r(f),l.d(f,{LocationsPageModule:()=>w});var u=l(177),i=l(9417),d=l(4742),h=l(2931),_=l(467),e=l(4438),P=l(8880),k=l(1626),y=l(4796);const m=o=>({"active-nav":o});function C(o,s){if(1&o){const a=e.RV6();e.j41(0,"ion-datetime",20),e.bIt("ionChange",function(n){e.eBV(a);const r=e.XpG();return e.Njj(r.onDateChange(n,"startday"))}),e.k0s()}if(2&o){const a=e.XpG();e.Y8G("firstDayOfWeek",1)("highlightedDates",a.highlightedDates)}}function b(o,s){if(1&o){const a=e.RV6();e.j41(0,"ion-datetime",20),e.bIt("ionChange",function(n){e.eBV(a);const r=e.XpG();return e.Njj(r.onDateChange(n,"endday"))}),e.k0s()}if(2&o){const a=e.XpG();e.Y8G("firstDayOfWeek",1)("highlightedDates",a.highlightedDates)}}function D(o,s){if(1&o&&(e.j41(0,"option",21),e.EFF(1),e.k0s()),2&o){const a=s.$implicit;e.Y8G("value",a.id),e.R7$(),e.JRh(null==a?null:a.title)}}function M(o,s){if(1&o&&(e.j41(0,"div",29)(1,"p"),e.EFF(2),e.k0s()()),2&o){const a=e.XpG().$implicit,t=e.XpG().$implicit;e.R7$(2),e.LHq(" ",t[a].surname," ",t[a].name," - ",t[a].hours," - ",t[a].type,"")}}function j(o,s){if(1&o&&(e.j41(0,"div",27),e.DNE(1,M,3,4,"div",28),e.k0s()),2&o){const a=s.$implicit,t=e.XpG(3);e.R7$(),e.Y8G("ngIf",t.isNumericKey(a))}}function F(o,s){if(1&o&&(e.j41(0,"div",25)(1,"h1"),e.EFF(2),e.k0s(),e.DNE(3,j,2,1,"div",26),e.k0s()),2&o){const a=s.$implicit,t=e.XpG(2);e.R7$(2),e.SpI(" ",a.date," "),e.R7$(),e.Y8G("ngForOf",t.getKeys(a))}}function O(o,s){if(1&o&&(e.j41(0,"div",22),e.DNE(1,F,4,2,"div",23),e.nrm(2,"div",24),e.k0s()),2&o){const a=e.XpG();e.R7$(),e.Y8G("ngForOf",a.responseData)}}let v=(()=>{var o;class s{getKeys(t){return Object.keys(t)}isNumericKey(t){return!isNaN(Number(t))}constructor(t,n,r,c,g){this.router=t,this.navCtrl=n,this.http=r,this.authService=c,this.cdr=g,this.currentPage="locations",this.selectedDateStart="",this.selectedDateEnd="",this.formattedDate1="",this.formattedDate2="",this.applyForm=new i.gE({startday:new i.MJ("",i.k0.required),endday:new i.MJ("",i.k0.required),location:new i.MJ("",i.k0.required)}),this.locations=[],this.formSubmitted=!1,this.errorMessage=null,this.responseData=null,this.highlightedDates=[{date:"2023-01-05",textColor:"#800080",backgroundColor:"#ffc0cb"},{date:"2023-01-10",textColor:"#09721b",backgroundColor:"#c8e5d0"},{date:"2023-01-20",textColor:"var(--ion-color-secondary-contrast)",backgroundColor:"var(--ion-color-secondary)"},{date:"2023-01-23",textColor:"rgb(68, 10, 184)",backgroundColor:"rgb(211, 200, 229)"}]}ngOnInit(){this.authService.isAuthenticated()?this.loadLocations():this.router.navigate(["/home"])}loadLocations(){var t=this;return(0,_.A)(function*(){const n=t.authService.getHashedCredentials();if(!n)return t.errorMessage="Failed to retrieve credentials.",void t.router.navigate(["/home"]);const r={username:n.hashedUsername,password:n.hashedPassword};try{t.http.post("https://bvproduct.app/api/locations.php",r).subscribe({next:c=>{t.locations=c,console.log(t.locations),t.cdr.markForCheck()},error:c=>{console.error("Error loading locations",c),t.errorMessage="Failed to load locations. Please try again later."}})}catch(c){console.error("Unexpected error",c),t.errorMessage="An unexpected error occurred. Please try again later."}})()}onDateChange(t,n){const r=t.detail.value,c=new Date(r),g=String(c.getDate()).padStart(2,"0"),G=String(c.getMonth()+1).padStart(2,"0"),p=`${c.getFullYear()}-${G}-${g}`;"startday"===n?(this.selectedDateStart=r,this.formattedDate1=p,this.applyForm.patchValue({startday:p})):"endday"===n&&(this.selectedDateEnd=r,this.formattedDate2=p,this.applyForm.patchValue({endday:p}))}openPopover(t,n){const r=document.querySelector(`ion-popover[trigger="${n}"]`);r&&r.present({ev:t})}unosForme(){if(this.applyForm.valid){const t=this.applyForm.value,n=this.authService.getHashedCredentials();if(!n)return this.errorMessage="Failed to retrieve credentials.",void console.error(this.errorMessage);const r={username:n.hashedUsername,password:n.hashedPassword,startday:t.startday,endday:t.endday,location:t.location};console.log("payload: ",r),this.http.post("https://bvproduct.app/api/locationsusers.php",r,{headers:{"Content-Type":"application/json"}}).subscribe({next:g=>{this.formSubmitted=!0,this.errorMessage=null,this.responseData=g,console.log("Data successfully fetched",g),console.log("Backend Response:",g)},error:g=>{this.formSubmitted=!0,this.errorMessage="There was an error fetching the data. Please try again later.",console.error("Error fetching data",g)}})}else this.formSubmitted=!0,this.errorMessage="Please fill out all required fields before submitting.",console.warn("Form is not valid")}navHours(){this.router.navigateByUrl("/hours")}navLokacija(){this.router.navigateByUrl("/locations")}navProfil(){this.router.navigateByUrl("/profil")}navOdjava(){this.router.navigateByUrl("/home")}}return(o=s).\u0275fac=function(t){return new(t||o)(e.rXU(h.Ix),e.rXU(P.q9),e.rXU(k.Qq),e.rXU(y.u),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-locations"]],standalone:!0,features:[e.aNF],decls:42,vars:18,consts:[[3,"fullscreen"],[1,"wraper"],[3,"ngSubmit","formGroup"],["src","assets/title image.png","alt","title image",1,"title-img"],["position","stacked"],["id","date1","readonly","","required","","formControlName","startday",3,"click","value"],["trigger","date1"],["id","date2","readonly","","required","","formControlName","endday",3,"click","value"],["trigger","date2"],[1,"lokacija"],["name","location","id","location","formControlName","location"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","submit"],["class","workersDataConteiner",4,"ngIf"],[3,"click","ngClass"],["src","assets/hours_icon.png","alt","hours icon"],["src","assets/location.png","alt","location icon"],["src","assets/profil_icon.png","alt","profil icon"],["src","assets/odjava_icon.png","alt","odjava icon"],["presentation","date","locale","hr-HR",3,"ionChange","firstDayOfWeek","highlightedDates"],[3,"value"],[1,"workersDataConteiner"],["class","workersDataDate",4,"ngFor","ngForOf"],[1,"space"],[1,"workersDataDate"],["class","workersData",4,"ngFor","ngForOf"],[1,"workersData"],["class","workers",4,"ngIf"],[1,"workers"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"form",2),e.bIt("ngSubmit",function(){return n.unosForme()}),e.nrm(3,"img",3),e.j41(4,"ion-item")(5,"ion-label",4)(6,"p"),e.EFF(7,"Po\u010detak razdoblja:"),e.k0s(),e.j41(8,"p"),e.EFF(9,"Izaberite datum"),e.k0s(),e.nrm(10,"br"),e.k0s(),e.j41(11,"ion-input",5),e.bIt("click",function(c){return n.openPopover(c,"popover1")}),e.k0s(),e.j41(12,"ion-popover",6),e.DNE(13,C,1,2,"ng-template"),e.k0s()(),e.j41(14,"ion-item")(15,"ion-label",4)(16,"p"),e.EFF(17,"Kraj razdoblja:"),e.k0s(),e.j41(18,"p"),e.EFF(19,"Izaberite datum"),e.k0s(),e.nrm(20,"br"),e.k0s(),e.j41(21,"ion-input",7),e.bIt("click",function(c){return n.openPopover(c,"popover2")}),e.k0s(),e.j41(22,"ion-popover",8),e.DNE(23,b,1,2,"ng-template"),e.k0s()(),e.j41(24,"p",9),e.EFF(25,"Lokacija posla:"),e.k0s(),e.j41(26,"select",10)(27,"option",11),e.EFF(28,"Izaberite lokaciju"),e.k0s(),e.DNE(29,D,2,2,"option",12),e.k0s(),e.j41(30,"button",13),e.EFF(31,"Prika\u017ei radne sate"),e.k0s()(),e.DNE(32,O,3,1,"div",14),e.k0s(),e.j41(33,"nav")(34,"a",15),e.bIt("click",function(){return n.navHours()}),e.nrm(35,"img",16),e.k0s(),e.j41(36,"a",15),e.bIt("click",function(){return n.navLokacija()}),e.nrm(37,"img",17),e.k0s(),e.j41(38,"a",15),e.bIt("click",function(){return n.navProfil()}),e.nrm(39,"img",18),e.k0s(),e.j41(40,"a",15),e.bIt("click",function(){return n.navOdjava()}),e.nrm(41,"img",19),e.k0s()()()),2&t&&(e.Y8G("fullscreen",!0),e.R7$(2),e.Y8G("formGroup",n.applyForm),e.R7$(9),e.Y8G("value",n.formattedDate1),e.R7$(10),e.Y8G("value",n.formattedDate2),e.R7$(8),e.Y8G("ngForOf",n.locations),e.R7$(3),e.Y8G("ngIf",n.responseData),e.R7$(2),e.Y8G("ngClass",e.eq3(10,m,"hours"===n.currentPage)),e.R7$(2),e.Y8G("ngClass",e.eq3(12,m,"locations"===n.currentPage)),e.R7$(2),e.Y8G("ngClass",e.eq3(14,m,"profil"===n.currentPage)),e.R7$(2),e.Y8G("ngClass",e.eq3(16,m,"odjava"===n.currentPage)))},dependencies:[d.bv,d.W9,d.A9,d.$w,d.uz,d.he,d.CF,d.Je,d.Gw,u.MD,u.YU,u.Sq,u.bT,i.YN,i.qT,i.xH,i.y7,i.wz,i.BC,i.cb,i.YS,i.X1,i.j4,i.JD],styles:["ion-content[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;line-height:1.42857143}img[_ngcontent-%COMP%]{display:block;max-width:100%;height:auto;margin-top:1em;padding:0 .5rem}h2[_ngcontent-%COMP%]{font-size:1.875rem;font-weight:500;line-height:1.1;margin-left:1rem}p[_ngcontent-%COMP%]{font-size:.875rem;font-family:Poppins,sans-serif}.lokacija[_ngcontent-%COMP%]{text-indent:1rem}form[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;flex-direction:column}ion-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:97%;font-size:.875rem;box-shadow:inset 0 1px 1px #000;border-radius:5px;text-indent:.5rem}select[_ngcontent-%COMP%]{background-color:#fff;min-height:40px;margin:0 .3rem}ion-item[_ngcontent-%COMP%]{width:107%;margin:0 -.5rem}ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000;font-size:1.2rem;text-indent:1rem}ion-datetime[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;box-shadow:0 1px 1px #00000013}button[_ngcontent-%COMP%], .formSend[_ngcontent-%COMP%]{background-color:#fb7426;color:#fff;width:100%;padding:1.2em 0;margin:2em 0;text-align:center;border:none;border-radius:5px;font-weight:700;font-size:1.2em}.formSend[_ngcontent-%COMP%]{font-size:1rem}.formSend.success[_ngcontent-%COMP%]{background-color:#009300}.formSend.error[_ngcontent-%COMP%]{background-color:red}nav[_ngcontent-%COMP%]{width:100%;height:15vmin;background-color:#000;color:#fff;font-weight:900;display:flex;justify-content:center;align-items:center;padding-top:.5rem;position:fixed;bottom:0;box-shadow:0 3px 17px #000000bf}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:9vmin;margin:1rem 1.5rem;filter:invert(100%) sepia(4%) saturate(6%) hue-rotate(211deg) brightness(104%) contrast(100%)}.active-nav[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-bottom:5px solid #000000}.workersDataDate[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.workersData[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:column}.space[_ngcontent-%COMP%]{margin-top:3rem;height:15vmin}"]}),s})();const L=[{path:"",component:v}];let x=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[h.iI.forChild(L),h.iI]}),s})(),w=(()=>{var o;class s{}return(o=s).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[u.MD,i.YN,d.bv,x,v]}),s})()}}]);